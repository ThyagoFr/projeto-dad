(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{191:function(e){e.exports=JSON.parse('{"name":"frontend","version":"0.1.0","private":true,"dependencies":{"compression":"^1.7.3","express":"^4.16.4","helmet":"^3.15.0","morgan":"^1.9.1","@ant-design/icons":"^4.2.2","@craco/craco":"^5.7.0","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","antd":"^4.6.4","antd-img-crop":"^3.13.1","antd-theme-webpack-plugin":"^1.3.6","aws-amplify":"^3.3.4","axios":"^0.20.0","babel-plugin-import":"^1.13.1","craco-less":"^1.17.0","less-vars-to-js":"^1.3.0","react":"^16.13.1","react-app-rewire-less":"^2.1.3","react-dom":"^16.13.1","react-images-upload":"^1.2.8","react-images-uploading":"^3.1.2","react-redux":"^7.2.1","react-router-dom":"^5.2.0","react-scripts":"3.4.3","react-toastify":"^6.0.9"},"scripts":{"start":"rescripts start","build":"rescripts build","test":"rescripts test","eject":"rescripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@rescripts/cli":"0.0.14","@rescripts/rescript-env":"0.0.12","webpack":"4.42.0"}}')},280:function(e,t,a){e.exports=a(556)},556:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),o=a.n(l),c=(a(285),a(276)),i=(a(290),a(278)),s=(a(295),a(102)),m=a(29),u=(a(300),a(121)),d=a(570),f=a(565),g=a(571),p=a(81),E=a.n(p),h=a(99),b=a(64),v=a.n(b),y=a(191),O="http://184.72.204.214:8090",j=y.version,w=(y.dependencies.react,v.a.create({baseURL:"".concat(O,"/api/v1"),headers:{"Content-Type":"application/json"}}));w.login=function(e){var t=e.access_token,a=e.user;localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(a))},w.setUser=function(e){localStorage.setItem("user",JSON.stringify(e))},w.logout=function(){localStorage.removeItem("user"),localStorage.removeItem("token"),w.defaults.headers.common.Authorization=void 0},w.setToken=function(){w.defaults.headers.put.Authorization="Bearer ".concat(localStorage.token)},w.loggedIn=function(){return localStorage.user},w.setUserInterests=function(e){var t=e.interests,a=JSON.parse(localStorage.user);a.interests=t,localStorage.setItem("user",JSON.stringify(a))},w.getUsername=function(){var e=w.userJSON();return e&&e.username?e.username:"G"},w.userPhoto=function(){var e=w.userJSON();return e&&e.photo?e.photo:null},w.userJSON=function(){return localStorage.user?JSON.parse(localStorage.user):null},w.getBookId=function(){var e=w.userJSON();return e?e.id:null};var S=w,k=(a(103),a(46)),I=(a(104),a(34)),C=(a(207),a(136)),x=(a(208),a(120)),F=a(149),D=a(150),R=a(173),L=a(168),P=function(){return{Authorization:"Bearer ".concat(localStorage.token),"Access-Control-Allow-Origin":"*"}},A=function(e){Object(R.a)(a,e);var t=Object(L.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={entities:[],totalCount:0},e}return Object(D.a)(a,[{key:"componentDidMount",value:function(){var e=this;S.get("/books").then((function(t){e.setState({entities:(t.data||[]).map((function(e){return{id:e.ID,author:e.Author,title:e.Title,cover:e.Cover,genre:e.Genre,summary:e.Summary,averageRate:e.Average,comments:e.Qtd}}))})})),S.loggedIn()&&v.a.get("".concat(O,"/api/v1/readers/").concat(S.getBookId(),"/interests"),{headers:P()}).then((function(e){e&&e.data&&S.setUserInterests({interests:e.data.map((function(e){return e.ID}))})}))}},{key:"render",value:function(){var e=this,t=x.a.Meta;return r.a.createElement(k.a,{gutter:24},this.state.entities.map((function(a,n){return r.a.createElement(I.a,{key:a.id,span:4,style:{padding:20}},r.a.createElement(x.a,{hoverable:!0,actions:[r.a.createElement(C.a,{style:{marginLeft:15},value:a.averageRate,allowHalf:!0,disabled:!0})],bordered:!1,onClick:function(){e.props.onBookClick(a)},bodyStyle:{height:120},cover:r.a.createElement("img",{style:{height:200},alt:a.title,src:a.cover})},r.a.createElement(t,{title:a.title,description:a.author})))})))}}]),a}(r.a.Component),N=(a(345),a(167)),T=a(132),z=(a(557),a(197)),U=(a(358),a(269)),B=(a(123),a(65)),J=(a(361),a(174)),q=(a(364),a(122)),M=(a(367),a(193)),G=a(277),H=(a(92),a(43)),V=(a(182),a(38)),_=(a(372),a(275)),K=a(562),Q=a(569),W=a(561),Y=(a(217),a(169)),X=(a(250),a(164)),$=(a(218),a(171)),Z=(a(385),a(279)),ee=(a(183),a(75)),te=a(118),ae=a.n(te),ne=a(158),re=a(172),le=(a(219),a(91)),oe=(a(179),a(85)),ce=a(568),ie=a(567),se=a(566),me=a(564),ue=a(563),de=(a(220),a(221),a(165)),fe=a(107);a(140);var ge=function(e){var t=e.handleCloseDrawer,a=e.showDrawer,l=e.onSubmit,o=Object(n.useState)(""),c=Object(m.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)(null),f=Object(m.a)(u,2),g=f[0],p=f[1],h=Object(n.useState)(!1),b=Object(m.a)(h,2),v=b[0],y=b[1],O=Object(n.useState)({}),j=Object(m.a)(O,2),w=(j[0],j[1],Object(n.useState)(!1)),C=Object(m.a)(w,2),x=C[0],F=C[1],D=Object(n.useState)(""),R=Object(m.a)(D,2),L=(R[0],R[1],Object(n.useState)(!1)),P=Object(m.a)(L,2),A=P[0],N=P[1],T=V.a.useForm(),z=Object(m.a)(T,1)[0],U=Object(n.useState)(!1),B=Object(m.a)(U,2),J=B[0],q=B[1],M=Object(n.useState)("1"),G=Object(m.a)(M,2),_=G[0],K=G[1];Object(n.useEffect)((function(){z.resetFields()}),[a]);var Q=oe.a.TabPane,W=function(){var e=Object(ne.a)(ae.a.mark((function e(t){var a,n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.url){e.next=5;break}return e.next=4,new Promise((function(e){var a=new FileReader;a.readAsDataURL(t.originFileObj),a.onload=function(){return e(a.result)}}));case 4:a=e.sent;case 5:(n=new Image).src=a,window.open(a).document.write(n.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Y.a,{title:"Login",width:720,onClose:function(){t()},visible:a,bodyStyle:{paddingBottom:80},footer:r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(H.a,{onClick:function(){t()},style:{marginRight:8}},"Cancelar"))},r.a.createElement(V.a,{form:z,layout:"vertical",style:{width:500,marginTop:30,marginLeft:80}},r.a.createElement(oe.a,{activeKey:_,onChange:function(e){K(e),z.resetFields()}},x?r.a.createElement(Q,{tab:"Recuperar Senha",key:"3"},r.a.createElement(k.a,{gutter:24},r.a.createElement(I.a,{md:24},r.a.createElement(V.a.Item,{name:"email",label:"E-mail",rules:[{required:!0,type:"email",message:"Por favor, informe um e-mail v\xe1lido!"}]},r.a.createElement(ee.a,null))),r.a.createElement(I.a,{md:12},r.a.createElement(V.a.Item,null,r.a.createElement(H.a,{type:"default",onClick:function(){z.resetFields(),F(!1),K("1")},style:{width:"100%"}},"Voltar"))),r.a.createElement(I.a,{md:12},r.a.createElement(V.a.Item,null,r.a.createElement(H.a,{type:"primary",loading:A,onClick:function(){N(!0),z.validateFields().then((function(e){console.log(e);var t=e;S.post("/sendemail",{email:t.email}).then((function(e){console.log(e),N(!1)})).catch((function(e){N(!1)}))}))},style:{width:"100%"}},"Recuperar"))))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{tab:"Entrar",key:1},r.a.createElement(V.a.Item,{name:"email",rules:[{required:!0,message:"Por favor, informe o e-mail!"}]},r.a.createElement(ee.a,{prefix:r.a.createElement(d.a,{className:"site-form-item-icon"}),placeholder:"E-mail"})),r.a.createElement(V.a.Item,{name:"password",rules:[{required:!0,message:"Por favor, informe a senha!"}]},r.a.createElement(ee.a.Password,{prefix:r.a.createElement(ce.a,{className:"site-form-item-icon"}),placeholder:"Senha",iconRender:function(e){return e?r.a.createElement(ie.a,null):r.a.createElement(se.a,null)}})),J?r.a.createElement(Z.a,{message:"E-mail n\xe3o cadastrado ou senha inv\xe1lida!",type:"error"}):null,r.a.createElement(V.a.Item,null,r.a.createElement("a",{onClick:function(e){e.preventDefault(),F(!0),K("3")},style:{float:"right"},href:""},"Esqueci minha senha")),r.a.createElement(V.a.Item,null,r.a.createElement(H.a,{loading:A,onClick:function(){q(!1),N(!0),z.validateFields(["email","password"]).then((function(e){var a=e;S.post("/login",{email:a.email,password:a.password}).then((function(e){console.log(e);var a=e.data.reader;S.login({access_token:e.data.token,user:{email:a.Email,age:a.Age,username:a.Name,id:a.ID,photo:a.Photo}}),N(!1),t(),l()})).catch((function(e){e&&e.response&&401==e.response.status&&(N(!1),q(!0))}))}))},type:"primary",style:{width:"100%"}},"Entrar"))),r.a.createElement(Q,{tab:"Registre-se",key:2},r.a.createElement(k.a,{gutter:24},r.a.createElement(I.a,{md:18},r.a.createElement(V.a.Item,{name:"username",label:"Nome de usu\xe1rio",rules:[{required:!0,message:"Por favor, informe o nome de usu\xe1rio!"}]},r.a.createElement(ee.a,null))),r.a.createElement(I.a,{md:6},r.a.createElement(V.a.Item,{name:"age",label:"Idade",rules:[{type:"number",min:0,max:99,message:"Por favor, informe um n\xfamero entre 0 e 99!"}]},r.a.createElement($.a,null)))),r.a.createElement(k.a,{gutter:24},r.a.createElement(I.a,{md:24},r.a.createElement(V.a.Item,{name:"email",label:"E-mail",rules:[{required:!0,type:"email",message:"Por favor, informe um e-mail v\xe1lido!"}]},r.a.createElement(ee.a,null)))),r.a.createElement(k.a,{gutter:24},r.a.createElement(I.a,{md:24},r.a.createElement(V.a.Item,{name:"password",label:"Senha",rules:[{required:!0,message:"Por favor, informe a senha!"}]},r.a.createElement(ee.a.Password,{iconRender:function(e){return e?r.a.createElement(ie.a,null):r.a.createElement(se.a,null)}})))),r.a.createElement(V.a.Item,{label:"Foto"},r.a.createElement(V.a.Item,{name:"photo",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList},noStyle:!0},r.a.createElement(de.a,{rotate:!0},r.a.createElement(X.a.Dragger,{onPreview:W,style:i?{width:100,height:100}:{},action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",beforeUpload:function(e){return"image/jpeg"===e.type||"image/png"===e.type||le.b.error("You can only upload JPG/PNG file!"),e.size/1024/1024<2||le.b.error("Image must smaller than 2MB!"),s(URL.createObjectURL(e)),p(e),!1},name:"files",onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}(e.file.originFileObj,(function(e){s(e),y(!1)})):y(!0)}},i?r.a.createElement(E.a,{size:64,src:i}):r.a.createElement(r.a.Fragment,null,v?r.a.createElement(me.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(ue.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"Clique ou arraste o arquivo para carregar."))))))),r.a.createElement(k.a,null,r.a.createElement(I.a,{md:24},r.a.createElement(V.a.Item,null,r.a.createElement(H.a,{loading:A,onClick:function(){var e=new FormData;N(!0),z.validateFields().then((function(t){var a=t.username,n=Object(re.a)(t,["username"]);Object.entries(n).map((function(t,a){var n=Object(m.a)(t,2),r=n[0],l=n[1];e.append(r,l)})),e.append("name",a),e.append("profile",g),console.log(g),S.post("/register",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){N(!1),K("1"),q(!1),z.resetFields()}))}))},type:"primary",style:{width:"100%",float:"right"}},"Salvar")))),r.a.createElement(fe.a,null))))))},pe=a(266),Ee=a.n(pe);var he=function(e){var t,a=e.book,l=e.showModal,o=e.onOk,c=e.reloadBook,i=e.setShowUser,s=Object(n.useState)({}),u=Object(m.a)(s,2),d=u[0],f=u[1],g=Object(n.useState)(!1),p=Object(m.a)(g,2),h=p[0],b=p[1],y=Object(n.useState)(!1),j=Object(m.a)(y,2),w=j[0],x=j[1],F=_.a.Paragraph,D=Object(n.useState)({}),R=Object(m.a)(D,2),L=R[0],A=R[1],Y=Object(n.useState)(""),X=Object(m.a)(Y,2),$=X[0],Z=X[1],ee=Object(n.useState)(5),te=Object(m.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!1),le=Object(m.a)(re,2),oe=le[0],ce=le[1],ie=Object(n.useState)(!1),se=Object(m.a)(ie,2),me=se[0],ue=se[1],de=Object(n.useState)([]),fe=Object(m.a)(de,2),pe=fe[0],he=fe[1],be=Object(n.useState)(!1),ve=Object(m.a)(be,2),ye=ve[0],Oe=ve[1],je=V.a.useForm(),we=Object(m.a)(je,1)[0];function Se(){A(JSON.parse(localStorage.user))}Object(n.useEffect)((function(){f(a.id),b(!1),x(!1),Z(""),ne(5),he([]),ue(!1);var e=S.userJSON();we.resetFields(),Oe(e&&e.interests&&e.interests.includes(a.id))}),[a]);var ke=function(e){e.onChange;var t=e.onSubmit,a=e.submitting;e.value;return r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{form:we},r.a.createElement(V.a.Item,{name:"userComment"},r.a.createElement(Ee.a,{rows:4})),r.a.createElement(k.a,null,r.a.createElement(V.a.Item,null,r.a.createElement(C.a,{defaultValue:5,value:ae,onChange:ne,style:{marginRight:20},allowHalf:!0})),r.a.createElement(V.a.Item,null,r.a.createElement(H.a,{htmlType:"submit",loading:a,onClick:t,type:"primary"},"Salvar Avalia\xe7\xe3o")))))};function Ie(e){Z(e.target.value)}function Ce(){ce(!0),we.validateFields().then((function(e){var t=e.userComment,a=ae,n=S.getBookId(),r={comment:t,rate:a,reader_id:n};v.a.post("".concat(O,"/api/v1/books/").concat(d,"/comments"),r,{headers:P()}).then((function(e){ce(!1),ue(!0),he([].concat(Object(G.a)(pe),[{reader:L.username,comment:t,rate:a,picture:L.photo||"https://dad-react-static.s3.us-east-2.amazonaws.com/icon.png"}])),c()}))}))}var xe=function(){return me?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{avatar:r.a.createElement(E.a,{src:L.photo||"https://dad-react-static.s3.us-east-2.amazonaws.com/icon.png",alt:L.username}),content:r.a.createElement(ke,{onChange:Ie,onSubmit:Ce,submitting:oe,value:$})}))};return r.a.createElement(N.a,{width:900,onCancel:o,onOk:o,visible:l},r.a.createElement(k.a,{gutter:24},r.a.createElement("img",{style:{height:300,marginRight:20},width:"25%",alt:a.title,src:a.cover}),r.a.createElement(q.a,{title:"Info",column:1,style:{display:"inline-block",width:"70%"}},r.a.createElement(q.a.Item,{label:"T\xedtulo"},a.title),r.a.createElement(q.a.Item,{label:"Autor"},a.author),r.a.createElement(q.a.Item,{label:"G\xeanero"},a.genre),r.a.createElement(q.a.Item,{label:"Resumo"},r.a.createElement(F,{ellipsis:{rows:5,expandable:!0,symbol:"mais"}},a.summary)))),r.a.createElement(k.a,{style:{marginTop:30},gutter:24},r.a.createElement(C.a,{style:{marginLeft:15},value:a.averageRate,allowHalf:!0,disabled:!0}),a.comments>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{style:{paddingLeft:8},value:a.averageRate,suffix:"/ 5"}),r.a.createElement(I.a,{md:10},r.a.createElement("a",{onClick:function(){S.loggedIn()?S.get("".concat(O,"/api/v1/books/").concat(d,"/comments"),{headers:P()}).then((function(e){console.log(d),console.log(e);var t=e.data.map((function(e){return{reader:e.User,email:e.Email,comment:e.Comment,rate:e.Rate,picture:e.UserPhoto||"https://dad-react-static.s3.us-east-2.amazonaws.com/icon.png"}}));Se(),ue(t.some((function(e){return e.email===JSON.parse(localStorage.user).email}))),he(t),b(!0)})):x(!0)}},r.a.createElement(J.a,{prefix:r.a.createElement(K.a,null),style:{paddingLeft:8},value:a.comments,suffix:"avalia\xe7\xf5es"})))):r.a.createElement(I.a,{md:11},"Este livro ainda n\xe3o foi avaliado.",r.a.createElement(H.a,{onClick:function(){S.loggedIn()?(Se(),b(!0)):x(!0)},style:{marginTop:4},type:"text"},r.a.createElement("span",{style:{fontWeight:"bold",color:"teal"}},"Deixe sua avalia\xe7\xe3o."))),r.a.createElement(I.a,{md:8},ye?r.a.createElement(B.a,{title:"Tenho interesse"},r.a.createElement(H.a,{type:"primary",style:{float:"right",marginLeft:15},shape:"circle",size:"large",icon:r.a.createElement(Q.a,null),onClick:function(){S.loggedIn()&&a.interestId&&(v.a.delete("".concat(O,"/api/v1/readers/").concat(S.getBookId(),"/interests/").concat(a.interestId),{headers:P()}).then((function(e){})),Oe(!1),o())}})):r.a.createElement(B.a,{title:"Tenho interesse"},r.a.createElement(H.a,{style:{float:"right",marginLeft:15},shape:"circle",size:"large",icon:r.a.createElement(W.a,null),onClick:function(){if(S.loggedIn()){var e={book_id:d};v.a.post("".concat(O,"/api/v1/readers/").concat(S.getBookId(),"/interests"),e,{headers:P()}).then((function(e){})),Oe(!0),v.a.get("".concat(O,"/api/v1/readers/").concat(S.getBookId(),"/interests"),{headers:P()}).then((function(e){e&&e.data&&S.setUserInterests({interests:e.data.map((function(e){return e.ID}))})}))}else x(!0)}})))),h?r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{orientation:"left"},"Coment\xe1rios"),r.a.createElement(z.b,(t={split:!1,className:"comment-list",itemLayout:"horizontal",dataSource:pe,style:{width:"100%"},size:"small"},Object(T.a)(t,"itemLayout","horizontal"),Object(T.a)(t,"renderItem",(function(e){return r.a.createElement("div",null,r.a.createElement(z.b.Item,{extra:r.a.createElement(J.a,{style:{paddingTop:8},value:e.rate,suffix:"/ 5"})},r.a.createElement(M.a,{author:e.reader,avatar:r.a.createElement(E.a,{src:e.picture,alt:e.reader}),content:e.comment})))})),t)),r.a.createElement(xe,null)):null,r.a.createElement(ge,{onSubmit:function(){i(!0)},handleCloseDrawer:function(){return x(!1)},showDrawer:w}))},be=function(e){Object(R.a)(a,e);var t=Object(L.a)(a);function a(){var e;Object(F.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={entities:[],totalCount:0},e}return Object(D.a)(a,[{key:"componentDidMount",value:function(){var e=this;v.a.get("".concat(O,"/api/v1/readers/").concat(S.getBookId(),"/interests"),{headers:P()}).then((function(t){t&&t.data&&e.setState({entities:(t.data||[]).map((function(e){return{id:e.ID,interestId:e.Interestid,author:e.Author,title:e.Title,cover:e.Cover,genre:e.Genre,summary:e.Summary,averageRate:e.Average,comments:e.Qtd}}))})}))}},{key:"render",value:function(){var e=this,t=x.a.Meta;return r.a.createElement(k.a,{gutter:24},this.state.entities.map((function(a,n){return r.a.createElement(I.a,{key:a.id,span:4,style:{padding:20}},r.a.createElement(x.a,{hoverable:!0,bordered:!1,onClick:function(){e.props.onBookClick(a)},bodyStyle:{height:120},cover:r.a.createElement("img",{style:{height:200},alt:a.title,src:a.cover})},r.a.createElement(t,{title:a.title,description:a.author})))})))}}]),a}(r.a.Component),ve=a(194);var ye=function(e){var t=e.handleCloseDrawer,a=e.showDrawer,l=e.onSubmit,o=e.userDetails,c=Object(n.useState)(""),i=Object(m.a)(c,2),s=i[0],u=i[1],d=Object(n.useState)(null),f=Object(m.a)(d,2),g=f[0],p=f[1],h=Object(n.useState)(!1),b=Object(m.a)(h,2),y=b[0],j=b[1],w=Object(n.useState)({}),S=Object(m.a)(w,2),C=(S[0],S[1],Object(n.useState)(!1)),x=Object(m.a)(C,2),F=(x[0],x[1],Object(n.useState)("")),D=Object(m.a)(F,2),R=(D[0],D[1],Object(n.useState)(!1)),L=Object(m.a)(R,2),A=L[0],N=L[1],T=V.a.useForm(),z=Object(m.a)(T,1)[0],U=Object(n.useState)(!1),B=Object(m.a)(U,2),J=(B[0],B[1],Object(n.useState)("1")),q=Object(m.a)(J,2),M=q[0],G=q[1];Object(n.useEffect)((function(){z.resetFields()}),[a]),Object(n.useEffect)((function(){if(o&&o.photo){u(o.photo);var e=null,t=new XMLHttpRequest;t.open("GET",o.photo),t.responseType="blob",t.onload=function(){e=t.response},t.send(),p(new File([e],o.photo.substring(o.photo.lastIndexOf("/"))))}}),[o]);var _=oe.a.TabPane,K=function(){var e=Object(ne.a)(ae.a.mark((function e(t){var a,n;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.url){e.next=5;break}return e.next=4,new Promise((function(e){var a=new FileReader;a.readAsDataURL(t.originFileObj),a.onload=function(){return e(a.result)}}));case 4:a=e.sent;case 5:(n=new Image).src=a,window.open(a).document.write(n.outerHTML);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Y.a,{title:"Login",width:720,onClose:function(){t()},visible:a,bodyStyle:{paddingBottom:80},footer:r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(H.a,{onClick:function(){t()},style:{marginRight:8}},"Cancelar"))},r.a.createElement(V.a,{initialValues:o,form:z,layout:"vertical",style:{width:500,marginTop:30,marginLeft:80}},r.a.createElement(oe.a,{activeKey:M,onChange:function(e){G(e),z.resetFields()}},r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{tab:"Atualize seus dados",key:"1"},r.a.createElement(k.a,{gutter:24},r.a.createElement(I.a,{md:24},r.a.createElement(V.a.Item,{name:"email",label:"E-mail",rules:[{required:!0,type:"email",message:"Por favor, informe um e-mail v\xe1lido!"}]},r.a.createElement(ee.a,{disabled:!0})))),r.a.createElement(k.a,{gutter:24},r.a.createElement(I.a,{md:18},r.a.createElement(V.a.Item,{name:"username",label:"Nome de usu\xe1rio",rules:[{required:!0,message:"Por favor, informe o nome de usu\xe1rio!"}]},r.a.createElement(ee.a,null))),r.a.createElement(I.a,{md:6},r.a.createElement(V.a.Item,{name:"age",label:"Idade",rules:[{type:"number",min:0,max:99,message:"Por favor, informe um n\xfamero entre 0 e 99!"}]},r.a.createElement($.a,null)))),r.a.createElement(k.a,{gutter:24},r.a.createElement(I.a,{md:24},r.a.createElement(V.a.Item,{name:"password",label:"Senha"},r.a.createElement(ee.a.Password,{iconRender:function(e){return e?r.a.createElement(ie.a,null):r.a.createElement(se.a,null)}})))),r.a.createElement(V.a.Item,{label:"Foto"},r.a.createElement(V.a.Item,{name:"photo",valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList},noStyle:!0},r.a.createElement(de.a,{rotate:!0},r.a.createElement(X.a.Dragger,{onPreview:K,style:s?{width:100,height:100}:{},action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",beforeUpload:function(e){return"image/jpeg"===e.type||"image/png"===e.type||le.b.error("You can only upload JPG/PNG file!"),e.size/1024/1024<2||le.b.error("Image must smaller than 2MB!"),u(URL.createObjectURL(e)),p(e),!1},name:"files",onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&function(e,t){var a=new FileReader;a.addEventListener("load",(function(){return t(a.result)})),a.readAsDataURL(e)}(e.file.originFileObj,(function(e){u(e),j(!1)})):j(!0)}},s?r.a.createElement(E.a,{size:64,src:s}):r.a.createElement(r.a.Fragment,null,y?r.a.createElement(me.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(ue.a,null)),r.a.createElement("p",{className:"ant-upload-text"},"Clique ou arraste o arquivo para carregar."))))))),r.a.createElement(k.a,null,r.a.createElement(I.a,{md:24},r.a.createElement(V.a.Item,null,r.a.createElement(H.a,{loading:A,onClick:function(){N(!0);var e=new FormData;z.validateFields().then((function(a){var n=a.username,r=Object(re.a)(a,["username"]);Object.entries(r).map((function(t,a){var n=Object(m.a)(t,2),r=n[0],l=n[1];e.append(r,l)})),e.append("name",n),e.append("profile",g),v.a.patch("".concat(O,"/api/v1/readers/").concat(o.id),e,{headers:Object(ve.a)(Object(ve.a)({},P()),{},{"Content-Type":"multipart/form-data"})}).then((function(e){var a={email:r.email,age:r.age,username:n,id:e.data.ID,photo:e.data.Photo};N(!1),z.resetFields(),t(),l(a)}))}))},type:"primary",style:{width:"100%",float:"right"}},"Atualizar")))))))))};var Oe=function(){console.log(S.userPhoto());var e=u.a.Header,t=u.a.Footer,a=u.a.Content,l=Object(n.useState)({}),o=Object(m.a)(l,2),p=o[0],b=o[1],v=Object(n.useState)(!1),y=Object(m.a)(v,2),O=y[0],w=y[1],k=Object(n.useState)(!1),I=Object(m.a)(k,2),C=I[0],x=I[1],F=Object(n.useState)(!1),D=Object(m.a)(F,2),R=D[0],L=D[1],P=document.location.href.substring(document.location.href.lastIndexOf("/")),N=function(e){b(e),w(!0)};Object(n.useEffect)((function(){x(S.loggedIn())}),[]);var T=r.a.createElement(s.a,null,r.a.createElement(s.a.Item,{key:"1",onClick:function(){L(!0)},icon:r.a.createElement(d.a,null)},"Meus Dados"),r.a.createElement(s.a.Item,{onClick:function(){x(!1),S.logout()},key:"2",icon:r.a.createElement(f.a,null)},"Sair"));return r.a.createElement(u.a,null,r.a.createElement(e,{style:{position:"fixed",zIndex:1,width:"100%"}},r.a.createElement("div",{className:"logo",style:{width:200,height:40,margin:"0px 24px 16px 0",float:"left"}},r.a.createElement(h.b,{to:"/"},r.a.createElement("img",{height:40,src:"https://dad-react-static.s3.us-east-2.amazonaws.com/untitled.png"}))),r.a.createElement(s.a,{selectedKeys:"/interests"===P?["2"]:["1"],theme:"dark",mode:"horizontal"},r.a.createElement(s.a.Item,{key:"1"},r.a.createElement(h.b,{to:"/"},"Todos os Livros")),C?r.a.createElement(s.a.Item,{key:"2"},r.a.createElement(h.b,{to:"/interests"},"Meus Livros")):null,C?r.a.createElement("div",{style:{float:"right",marginRight:40},key:"4"},r.a.createElement(i.a,{overlay:T,trigger:["click"],placement:"bottomLeft"},r.a.createElement("a",{onClick:function(e){e.preventDefault()}},S.userPhoto()?r.a.createElement(E.a,{size:48,src:S.userPhoto()}):r.a.createElement(E.a,{size:48,style:{background:"#f0f2f5",color:"teal",fontWeight:"bold"}},S.getUsername()[0])))):null)),r.a.createElement(u.a,null,r.a.createElement(a,{style:{padding:"0 50px",marginTop:64}},r.a.createElement("div",{style:{background:"#f0f2f5",padding:"24px",minHeight:"600px"}},"/interests"===P&&S.loggedIn()?r.a.createElement(be,{onBookClick:N}):r.a.createElement(A,{onBookClick:N})),r.a.createElement(c.a,null,r.a.createElement("div",{style:{height:50,width:50,lineHeight:"40px",borderRadius:4,backgroundColor:"teal",color:"#fff",textAlign:"center",verticalAlign:"middle",fontSize:20}},r.a.createElement(g.a,null))))),r.a.createElement(t,{style:{textAlign:"center"}},"GoodBooks DAD - 2020 - v$",j),r.a.createElement(he,{setShowUser:x,showModal:O,book:p,reloadBook:function(){S.get("/books/".concat(p.id)).then((function(e){var t=e.data;b({id:t.ID,author:t.Author,title:t.Title,cover:t.Cover,genre:t.Genre,summary:t.Summary,averageRate:t.Average,comments:t.Qtd})}))},onOk:function(){w(!1),b({})}}),r.a.createElement(ye,{onSubmit:function(e){S.setUser(e)},handleCloseDrawer:function(){return L(!1)},showDrawer:R,userDetails:S.userJSON()}),r.a.createElement(fe.a,null))},je=a(51),we=function(){return r.a.createElement(h.a,null,r.a.createElement(je.c,null,r.a.createElement(je.a,{path:"/interests"},r.a.createElement(Oe,null)),r.a.createElement(je.a,{path:"/"},r.a.createElement(Oe,null))))};var Se=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(we,null,r.a.createElement(Oe,null)))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Se,null)),document.getElementById("root"))}},[[280,1,2]]]);
//# sourceMappingURL=main.83596f28.chunk.js.map